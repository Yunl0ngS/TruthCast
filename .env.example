# ============================================================
# TruthCast 环境配置示例
# 复制此文件为 .env 并填写实际值
# ============================================================

# ------------------------------------------------------------
# 1. 基础配置
# ------------------------------------------------------------
APP_NAME=TruthCast MVP
APP_ENV=dev
LOG_LEVEL=INFO

# ------------------------------------------------------------
# 2. LLM 基础配置（全局）
# ------------------------------------------------------------
TRUTHCAST_LLM_ENABLED=false
TRUTHCAST_LLM_BASE_URL=https://api.openai.com/v1
TRUTHCAST_LLM_MODEL=gpt-4o-mini
TRUTHCAST_LLM_API_KEY=

# ------------------------------------------------------------
# 3. Claim 抽取配置
# ------------------------------------------------------------
TRUTHCAST_CLAIM_MAX_ITEMS=8
TRUTHCAST_CLAIM_MIN_SCORE=0.25

# ------------------------------------------------------------
# 4. 风险快照配置
# ------------------------------------------------------------
TRUTHCAST_RISK_LLM_ENABLED=false
TRUTHCAST_RISK_LLM_MODEL=
TRUTHCAST_DEBUG_RISK_SNAPSHOT=true

# ------------------------------------------------------------
# 5. 文本复杂度分析配置
# ------------------------------------------------------------
TRUTHCAST_COMPLEXITY_LLM_ENABLED=false
TRUTHCAST_COMPLEXITY_LLM_MODEL=
TRUTHCAST_DEBUG_COMPLEXITY=false

# ------------------------------------------------------------
# 6. 证据对齐配置
# ------------------------------------------------------------
TRUTHCAST_ALIGNMENT_LLM_ENABLED=false
TRUTHCAST_ALIGNMENT_LLM_MODEL=
TRUTHCAST_DEBUG_ALIGNMENT=true

# ------------------------------------------------------------
# 7. 联网检索配置
# ------------------------------------------------------------
# 启用联网检索
TRUTHCAST_WEB_RETRIEVAL_ENABLED=true
# 每条主张最大检索数量
TRUTHCAST_WEB_RETRIEVAL_TOPK=10
# 请求超时（秒）
TRUTHCAST_WEB_RETRIEVAL_TIMEOUT_SEC=8
# Debug 日志
TRUTHCAST_DEBUG_WEB_RETRIEVAL=true

# === 搜索 Provider 选择 ===
# 可选值: baidu | bocha | searxng | tavily | serpapi
TRUTHCAST_WEB_SEARCH_PROVIDER=bocha

# === 博查搜索 (推荐国内使用) ===
# 注册地址: https://open.bochaai.com/
TRUTHCAST_BOCHA_API_KEY=
TRUTHCAST_BOCHA_ENDPOINT=https://api.bochaai.com/v1/web-search
# 时间过滤: noLimit | oneDay | oneWeek | oneMonth | oneYear
TRUTHCAST_BOCHA_FRESHNESS=oneYear
# 是否返回摘要
TRUTHCAST_BOCHA_SUMMARY=true

# === SearXNG (开源元搜索，免费) ===
# 公开实例: searx.be | search.bus-hit.me | northboot.xyz
TRUTHCAST_SEARXNG_ENDPOINT=https://searx.be/search
# 聚合引擎（逗号分隔）
TRUTHCAST_SEARXNG_ENGINES=google,bing,duckduckgo
# 可选分类: general | images | news | videos
TRUTHCAST_SEARXNG_CATEGORIES=
TRUTHCAST_SEARXNG_LANGUAGE=zh-CN

# === 百度搜索 (国内) ===
TRUTHCAST_BAIDU_API_KEY=
TRUTHCAST_BAIDU_ENDPOINT=https://api.qnaigc.com/v1/search/web
# 时间过滤: day | week | month | year
TRUTHCAST_BAIDU_TIME_FILTER=year
# 站点过滤（逗号分隔）
TRUTHCAST_BAIDU_SITE_FILTER=news.cctv.com,www.xinhuanet.com

# === Tavily (需代理) ===
TRUTHCAST_TAVILY_API_KEY=
TRUTHCAST_TAVILY_ENDPOINT=https://api.tavily.com/search

# === SerpAPI (需代理) ===
TRUTHCAST_SERPAPI_API_KEY=
TRUTHCAST_SERPAPI_ENDPOINT=https://serpapi.com/search.json

# === 域名过滤（通用） ===
# 仅允许指定域名的结果（留空不限制）
TRUTHCAST_WEB_ALLOWED_DOMAINS=

# ------------------------------------------------------------
# 8. 证据摘要配置
# ------------------------------------------------------------
TRUTHCAST_EVIDENCE_SUMMARY_ENABLED=false
TRUTHCAST_EVIDENCE_SUMMARY_MAX_ITEMS=3
TRUTHCAST_EVIDENCE_SUMMARY_INPUT_LIMIT=10
TRUTHCAST_EVIDENCE_SUMMARY_LLM_MODEL=
TRUTHCAST_DEBUG_EVIDENCE_SUMMARY=true

# ------------------------------------------------------------
# 9. 并行处理配置
# ------------------------------------------------------------
TRUTHCAST_CLAIM_PARALLEL_WORKERS=3
TRUTHCAST_ALIGN_PARALLEL_WORKERS=4

# ------------------------------------------------------------
# 10. 舆情预演配置
# ------------------------------------------------------------
TRUTHCAST_SIMULATION_LLM_ENABLED=false
TRUTHCAST_SIMULATION_LLM_MODEL=gpt-4o-mini
TRUTHCAST_SIMULATION_MAX_NARRATIVES=4
TRUTHCAST_SIMULATION_TIMEOUT_SEC=45
TRUTHCAST_SIMULATION_MAX_RETRIES=2
TRUTHCAST_SIMULATION_RETRY_DELAY=2
TRUTHCAST_DEBUG_SIMULATION=true

# ------------------------------------------------------------
# 11. 报告生成配置
# ------------------------------------------------------------
# 启用 LLM 驱动的报告生成
TRUTHCAST_REPORT_LLM_ENABLED=false
# 独立模型配置（留空使用全局）
TRUTHCAST_REPORT_LLM_MODEL=
# 请求超时（秒）
TRUTHCAST_REPORT_TIMEOUT_SEC=30
# Debug 日志
TRUTHCAST_DEBUG_REPORT=true

# ------------------------------------------------------------
# 12. 性能优化配置
# ------------------------------------------------------------
# 输入文本最大字符数（超出自动截断）
TRUTHCAST_MAX_INPUT_CHARS=8000

# LLM 并发限流：同时最多允许多少个 LLM 调用
TRUTHCAST_LLM_CONCURRENCY=5
# LLM 调用等待超时（秒）
TRUTHCAST_MAX_QUEUE_WAIT_SEC=30

# 内存缓存配置
# 风险快照缓存 TTL（秒）
TRUTHCAST_CACHE_DETECT_TTL=300
# 主张抽取缓存 TTL（秒）
TRUTHCAST_CACHE_CLAIMS_TTL=300
# 缓存最大条目数
TRUTHCAST_CACHE_MAX_SIZE=100

# 历史记录数据库路径（留空使用默认路径）
TRUTHCAST_HISTORY_DB_PATH=

# ------------------------------------------------------------
# 13. 应对内容生成配置
# ------------------------------------------------------------
# 是否启用 LLM 生成
TRUTHCAST_CONTENT_LLM_ENABLED=false

# LLM 模型配置（可独立配置，默认使用全局配置）
TRUTHCAST_CONTENT_LLM_MODEL=
TRUTHCAST_CONTENT_LLM_BASE_URL=
TRUTHCAST_CONTENT_LLM_API_KEY=

# 超时配置
TRUTHCAST_CONTENT_TIMEOUT_SEC=45

# 澄清稿配置
TRUTHCAST_CLARIFICATION_SHORT_MAX=150
TRUTHCAST_CLARIFICATION_MEDIUM_MAX=400
TRUTHCAST_CLARIFICATION_LONG_MAX=800

# FAQ 配置
TRUTHCAST_FAQ_DEFAULT_COUNT=5
TRUTHCAST_FAQ_MAX_COUNT=10

# 多平台话术配置
TRUTHCAST_PLATFORM_WEIBO_MAX=280
TRUTHCAST_PLATFORM_WECHAT_MAX=1000
TRUTHCAST_PLATFORM_XIAOHONGSHU_MAX=500
TRUTHCAST_PLATFORM_DOUYIN_MAX_SEC=60
TRUTHCAST_PLATFORM_KUAISHOU_MAX_SEC=90
TRUTHCAST_PLATFORM_BILIBILI_MAX_SEC=180

# Debug 配置
TRUTHCAST_DEBUG_CONTENT=true

# ============================================================
# 14. CLI 配置（命令行工具特有）
# ============================================================
# API 基础地址（优先级：CLI flag > TRUTHCAST_API_BASE > NEXT_PUBLIC_API_BASE > 默认值）
# TRUTHCAST_API_BASE=http://127.0.0.1:8000

# CLI 请求超时时间（秒）
TRUTHCAST_CLI_TIMEOUT=30

# CLI 输出格式（text 或 json）
TRUTHCAST_CLI_OUTPUT_FORMAT=text

# CLI 请求重试次数
TRUTHCAST_CLI_RETRY_TIMES=3

# Chat 意图分类（LLM-first + 回退规则）
TRUTHCAST_CHAT_INTENT_LLM_ENABLED=false
TRUTHCAST_CHAT_INTENT_LLM_FIRST=true
TRUTHCAST_CHAT_INTENT_LLM_MODEL=
TRUTHCAST_CHAT_INTENT_LLM_BASE_URL=
TRUTHCAST_CHAT_INTENT_LLM_API_KEY=
TRUTHCAST_CHAT_INTENT_LLM_TIMEOUT_SEC=12

# Chat 会话成本与缓存护栏
TRUTHCAST_SESSION_TOOL_MAX_CALLS=50
TRUTHCAST_SESSION_LLM_MAX_CALLS=20
TRUTHCAST_SESSION_CACHE_TTL_SEC=300
TRUTHCAST_SESSION_HASH_BUCKET_LIMIT=8

# ------------------------------------------------------------
# 15. 多模态/网页抓取配置 (News Crawler)
# ------------------------------------------------------------
TRUTHCAST_CRAWLER_LLM_MODEL=
TRUTHCAST_CRAWLER_TIMEOUT_SEC=15
TRUTHCAST_CRAWLER_USER_AGENT="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
TRUTHCAST_DEBUG_CRAWLER=true
